@model List<Staff_WebServer.Models.Order>

@{
    ViewData["Title"] = "Список приказов";
    Layout = "~/Views/Shared/_Layout.cshtml";
    var currentSort = Context.Request.Query["sort"].ToString();
    var currentSearch = Context.Request.Query["search"].ToString();
}

<h2 class="text-center">Список приказов</h2>

<form method="get" class="mb-3 d-flex gap-2 align-items-center">
    <input type="text" name="search" placeholder="Номер приказа" value="@currentSearch" class="form-control w-25" />
    <button type="submit" class="btn btn-primary">🔍 Найти</button>
    <a asp-action="OrderList" class="btn btn-secondary">Сброс</a>
</form>

<div class="mb-2">
    <span class="me-2">Сортировка:</span>
    <a asp-action="OrderList"
       asp-route-search="@currentSearch"
       asp-route-sort="asc"
       class="btn btn-sm @(currentSort == "asc" ? "btn-success" : "btn-outline-secondary")">
        ↑ По возрастанию
    </a>
    <a asp-action="OrderList"
       asp-route-search="@currentSearch"
       asp-route-sort="desc"
       class="btn btn-sm @(currentSort == "desc" ? "btn-success" : "btn-outline-secondary")">
        ↓ По убыванию
    </a>
</div>

<table class="table table-striped table-bordered table-hover mt-3">
    <thead class="table-dark">
    <tr>
        <th>№ Приказа</th>
        <th>Дата</th>
        <th>Сотрудник</th>
        <th>Тип приказа</th>
        <th>Текст</th>
    </tr>
    </thead>
    <tbody>
    @foreach (var order in Model)
    {
        <tr>
            <td>@order.Id</td>
            <td>@order.Date.ToShortDateString()</td>
            <td>@order.Employee?.FullName</td>
            <td>@order.OrderType?.Name</td>
            <td>@order.Text</td>
        </tr>
    }
    </tbody>
</table>